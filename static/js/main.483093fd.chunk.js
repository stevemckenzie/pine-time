(this["webpackJsonppine-time"]=this["webpackJsonppine-time"]||[]).push([[0],{17:function(e,t,a){e.exports={button:"styles_button__11DqB",primary:"styles_primary__3zc0g",secondary:"styles_secondary__BWsck",loading:"styles_loading__1vDzj",children:"styles_children__VUq5B",loadingIndicator:"styles_loadingIndicator__2k2ae"}},18:function(e,t,a){e.exports={app:"styles_app__3zBUL",header:"styles_header__1GaP8",searchButton:"styles_searchButton__wuNKH",logo:"styles_logo__49Cdz",content:"styles_content__Jw4F6"}},25:function(e,t,a){e.exports={search:"styles_search__3DMt1",stations:"styles_stations__5odA8",meta:"styles_meta__1AcvI"}},26:function(e,t,a){e.exports={stationPage:"styles_stationPage__1g8y_",loadingIndicator:"styles_loadingIndicator__3yzfn"}},32:function(e,t,a){"use strict";var n=a(9),r=a(4),c=a(16),i=a(12),s={favorites:[],items:{},searchResults:[],stations:{}};t.a=Object(i.c)({stations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0,a=t.type,i=Object(c.a)(t,["type"]);switch(a){case"FAVORITE_ADD":var o=i.id;if(e.favorites.includes(o))return e;var l=[].concat(Object(r.a)(e.favorites),[o]);return Object(n.a)({},e,{favorites:l});case"FAVORITE_REMOVE":var u=i.id,m=e.favorites.findIndex((function(e){return e===u}));if(-1===m)return e;var d=Object(r.a)(e.favorites);return d.splice(m,1),Object(n.a)({},e,{favorites:d});case"SEARCH_RESULTS_UPDATE":return Object(n.a)({},e,{},i);case"STATIONS_UPDATE":var p=Object(n.a)({},e.stations,{},i.stations);return Object(n.a)({},e,{stations:p});case"STATION_ITEMS_UPDATE":var f=Object(n.a)({},e.items,{},i.items);return Object(n.a)({},e,{items:f});default:return e}}})},41:function(e,t,a){e.exports={loadingIndicator:"styles_loadingIndicator__kkuCt"}},44:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},45:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(16),i=a(14),s=function(e){var t=e.children,a=e.title,n=Object(c.a)(e,["children","title"]);return r.a.createElement(i.b,Object.assign({title:a},n),r.a.createElement("span",null,t||a))},o=a(3),l=a(1),u=a.n(l),m=a(5),d=a(11),p=a.n(d),f=a(46),E=a(10),v=a(2),_=a(24),h=a.n(_),b=a(39),O=a.n(b),y=a(41),T=a.n(y),g=function(e){var t=e.className,a=e.loading,n=void 0===a||a;return r.a.createElement("div",{className:h()(T.a.loadingIndicator,t)},r.a.createElement(O.a,{loading:n}))},j=a(17),A=a.n(j),N=function(e){var t,a=e.children,n=e.disabled,i=e.kind,s=e.loading,o=void 0!==s&&s,l=e.title,u=Object(c.a)(e,["children","disabled","kind","loading","title"]);return r.a.createElement("button",Object.assign({className:h()(A.a.button,(t={},Object(v.a)(t,A.a[i],!!i),Object(v.a)(t,A.a.loading,o),t)),disabled:n||o,title:l},u),o&&r.a.createElement(g,{className:A.a.loadingIndicator}),r.a.createElement("span",{className:A.a.children},a||l))},I=a(9),w=a(42),S=a(43),M={f:"json"},D=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,c,i,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.options,r=void 0===n?{}:n,c=t.query,i=void 0===c?{}:c,s=Object(S.stringify)(Object(I.a)({},M,{},Object(w.omitBy)(i,(function(e){return!e})))),e.next=4,fetch("".concat("https://geo.weather.gc.ca/geomet/features/collections").concat(a,"?").concat(s),Object(I.a)({headers:{"Content-Type":"application/json"}},r));case 4:return o=e.sent,e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"/climate-stations/items",query:{limit:25,STATION_NAME:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D({url:"/climate-stations/items",query:{CLIMATE_IDENTIFIER:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.day,r=t.limit,c=void 0===r?30:r,i=t.month,s=t.year,e.abrupt("return",D({url:"/climate-daily/items/",query:{CLIMATE_IDENTIFIER:a,limit:c,LOCAL_YEAR:s,LOCAL_MONTH:i,LOCAL_DAY:n}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return e.map((function(e){var t=e.geometry.coordinates,a=e.id,n=e.properties;return{coordinates:t,id:a,elevation:n.ELEVATION,firstUpdated:n.FIRST_DATE,lastUpdated:n.LAST_DATE,province:n.PROV_STATE_TERR_CODE,stationName:n.STATION_NAME}}))},P=function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a,n){var r,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e);case 2:r=t.sent,c=r.features,i=k(void 0===c?[]:c),a({type:"SEARCH_RESULTS_UPDATE",searchResults:i});case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},L=function(e){var t=e.stations.searchResults;return void 0===t?[]:t},U=a(25),C=a.n(U),B=function(){var e=Object(f.a)({mode:"onChange"}),t=e.formState,a=t.isSubmitted,n=t.isSubmitting,c=t.isValid,i=e.handleSubmit,o=e.register,l=Object(E.b)(),d=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.stationName,e.abrupt("return",l(P(a)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=Object(E.c)(L),_=a&&!n&&0===v.length;return r.a.createElement("div",{className:C.a.search},r.a.createElement("form",{name:"searchForm",onSubmit:i(d)},r.a.createElement("input",{autoFocus:!0,name:"stationName",placeholder:"Search for weather stations...",ref:o({required:!0}),type:"text"}),r.a.createElement(N,{disabled:!c,kind:"primary",loading:n,title:"Search"})),v.length>0&&r.a.createElement("ul",{className:C.a.stations},v.map((function(e){var t=e.id,a=e.lastUpdated,n=e.province,c=e.stationName;return r.a.createElement("li",{key:t},r.a.createElement(s,{title:c,to:"/stations/".concat(t)},r.a.createElement("div",null,r.a.createElement("div",null,c),r.a.createElement("div",null,r.a.createElement("small",null,"Last updated: ",p()(a).format("YYYY-MM-DD")))),r.a.createElement("div",{className:C.a.meta},n)))}))),_&&r.a.createElement("p",null,"No stations found."))},F=a(7),q=function(e){e.children;var t=e.headers,a=e.rows;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return"string"===typeof e?r.a.createElement("th",{key:e,title:e},e):e})))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e){return"object"===typeof e?e:r.a.createElement("td",null,e)})))}))))},V=a(26),z=a.n(V),H=["Date","Min Temp","Max Temp","Mean Temp","Precipitation"],J=function(){var e=Object(E.b)(),t=Object(o.f)().id,a=Object(E.c)(function(e){return function(t){var a=t.stations.stations;return(void 0===a?{}:a)[e]}}(t))||{},c=a.elevation,i=a.firstUpdated,s=a.lastUpdated,l=a.province,d=a.stationName,f=Object(E.c)(function(e){return function(t){var a=t.stations.items;return(void 0===a?{}:a)[e]}}(t))||[],_=f.map((function(e){var t=e.date,a=e.maxTemperature,n=e.meanTemperature,r=e.minTemperature,c=e.totalPrecipitation;return[p()(t).format("YYYY-MM-DD"),"".concat(r,"C"),"".concat(a,"C"),"".concat(n,"C"),c>0?"".concat(c,"mm"):0]})),h=Object(n.useState)(!1),b=Object(F.a)(h,2),O=b[0],y=b[1];return Object(n.useEffect)((function(){t&&e(function(e,t){return function(){var a=Object(m.a)(u.a.mark((function a(n,r){var c,i,s,o,l,m,d,f,E,_,h;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(!0),a.next=3,x(e);case 3:return c=a.sent,(i=c.features).length,s=k(i),o=Object(F.a)(s,1),l=o[0],n({type:"STATIONS_UPDATE",stations:Object(v.a)({},e,l)}),m=p()().subtract(30,"days"),d=m.format("M"),f=m.format("YYYY"),a.next=14,Y({id:e,month:d,year:f});case 14:E=a.sent,_=E.features,h=_.map((function(e){var t=e.properties;return{date:t.LOCAL_DATE,maxTemperature:t.MAX_TEMPERATURE,meanTemperature:t.MEAN_TEMPERATURE,minTemperature:t.MIN_TEMPERATURE,totalPrecipitation:t.TOTAL_PRECIPITATION}})),n({type:"STATION_ITEMS_UPDATE",items:Object(v.a)({},e,h)}),t(!1);case 19:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}(t,y))}),[e,t]),r.a.createElement("div",{className:z.a.stationPage},O?r.a.createElement(g,{className:z.a.loadingIndicator}):r.a.createElement("div",null,r.a.createElement("div",{className:z.a.station},r.a.createElement("h2",null,d),r.a.createElement("div",null,l),r.a.createElement("div",null,"Elevation: ",c,"m"),r.a.createElement("div",null,"First updated: ",p()(i).format("YYYY-MM-DD")),r.a.createElement("div",null,"Last updated: ",p()(s).format("YYYY-MM-DD"))),f.length>0&&r.a.createElement(q,{headers:H,rows:_})))},W=function(){return r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/stations/search",children:r.a.createElement(B,null)}),r.a.createElement(o.a,{path:"/stations/:id",children:r.a.createElement(J,null)}))},G=a(18),K=a.n(G);t.a=function(){return r.a.createElement("div",{className:K.a.app},r.a.createElement("div",{className:K.a.header},r.a.createElement(s,{className:K.a.logo,to:"/"},r.a.createElement("h1",null,"Pine Time")),r.a.createElement(s,{className:K.a.searchButton,title:"Search for a weather station",to:"/stations/search"})),r.a.createElement("div",{className:K.a.content},r.a.createElement(W,null)))}},47:function(e,t,a){e.exports=a(48)},48:function(e,t,a){"use strict";a.r(t),function(e){var t=a(0),n=a.n(t),r=a(22),c=a.n(r),i=a(12),s=a(10),o=(a(37),a(38)),l=a(14),u=a(45),m=a(32),d=a(44),p=(a(64),[o.a.withExtraArgument({})]);var f=i.a.apply(void 0,p)(i.d)(m.a);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(s.a,{store:f},n.a.createElement(l.a,null,n.a.createElement(u.a,null)))),document.getElementById("root")),d.a()}.call(this,a(33)(e))},64:function(e,t,a){}},[[47,1,2]]]);
//# sourceMappingURL=main.483093fd.chunk.js.map