(this["webpackJsonppine-time"]=this["webpackJsonppine-time"]||[]).push([[0],{18:function(e,t,a){e.exports={button:"styles_button__12U2K",primary:"styles_primary__3HQ5-",secondary:"styles_secondary__2pJ5d",loading:"styles_loading__3E_HN",children:"styles_children__1JDIs",loadingIndicator:"styles_loadingIndicator__3yut4"}},19:function(e,t,a){e.exports={app:"styles_app__1jJpR",header:"styles_header__3SREE",searchButton:"styles_searchButton__g3D_P",logo:"styles_logo__Q20fk",content:"styles_content__15oFw"}},26:function(e,t,a){e.exports={search:"styles_search__MREa2",stations:"styles_stations__1UHHn",meta:"styles_meta__3ijpz"}},27:function(e,t,a){e.exports={stationPage:"styles_stationPage__14IdA",loadingIndicator:"styles_loadingIndicator__1xERv"}},33:function(e,t,a){"use strict";var n=a(9),r=a(5),i=a(12),c=a(11);t.a=Object(c.c)({stations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{favorites:[],items:{},stations:{}},t=arguments.length>1?arguments[1]:void 0,a=t.type,c=Object(i.a)(t,["type"]);switch(a){case"FAVORITE_ADD":var o=c.id;if(e.favorites.includes(o))return e;var s=[].concat(Object(r.a)(e.favorites),[o]);return Object(n.a)({},e,{favorites:s});case"FAVORITE_REMOVE":var l=c.id,u=e.favorites.findIndex((function(e){return e===l}));if(-1===u)return e;var m=Object(r.a)(e.favorites);return m.splice(u,1),Object(n.a)({},e,{favorites:m});case"STATIONS_UPDATE":var d=Object(n.a)({},e.stations,{},c.stations);return Object(n.a)({},e,{stations:d});case"STATION_ITEMS_UPDATE":var p=Object(n.a)({},e.items,{},c.items);return Object(n.a)({},e,{items:p});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:0},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=Object(i.a)(t,["type"]);switch(a){case"SET_LOADING":var c=e.loading+r.loading;return Object(n.a)({},e,{loading:c});default:return e}}})},41:function(e,t,a){e.exports={loadingIndicator:"styles_loadingIndicator__89poN"}},42:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return o}));var n=a(17),r=a(11),i=(a(43),a(44)),c=a(33),o=function(){var e=[i.a.withExtraArgument({})];var t=r.a.apply(void 0,e)(r.d),a=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),o=t(c.a,a);return o.subscribe((function(){o.subscribe(Object(n.throttle)((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log("Failed to persist",a)}}(o.getState())}),1e3))})),o}}).call(this,a(35)(e))},46:function(e,t,a){e.exports=a(63)},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),c=a.n(i),o=a(13),s=a(15),l=a(12),u=function(e){var t=e.children,a=e.title,n=Object(l.a)(e,["children","title"]);return r.a.createElement(s.b,Object.assign({title:a},n),r.a.createElement("span",null,t||a))},m=a(4),d=a(1),p=a.n(d),f=a(3),E=a(6),v=a(10),h=a.n(v),_=a(45),b=a(9),O=a(17),y=a(38),g={f:"json"},T=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,i,c,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.options,r=void 0===n?{}:n,i=t.query,c=void 0===i?{}:i,o=Object(y.stringify)(Object(b.a)({},g,{},Object(O.omitBy)(c,(function(e){return!e})))),e.next=4,fetch("".concat("https://geo.weather.gc.ca/geomet/features/collections").concat(a,"?").concat(o),Object(b.a)({headers:{"Content-Type":"application/json"}},r));case 4:return s=e.sent,e.abrupt("return",s.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,n=void 0===a?30:a,r=t.stationName,e.abrupt("return",T({url:"/climate-stations/items",query:{limit:n,STATION_NAME:r}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T({url:"/climate-stations/items",query:{CLIMATE_IDENTIFIER:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,i,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.day,r=t.limit,i=void 0===r?30:r,c=t.month,o=t.year,e.abrupt("return",T({url:"/climate-daily/items/",query:{CLIMATE_IDENTIFIER:a,limit:i,LOCAL_YEAR:o,LOCAL_MONTH:c,LOCAL_DAY:n}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return e.map((function(e){var t=e.geometry.coordinates,a=e.id,n=e.properties;return{coordinates:t,id:a,elevation:n.ELEVATION,firstUpdated:n.FIRST_DATE,lastUpdated:n.LAST_DATE,province:n.PROV_STATE_TERR_CODE,stationName:n.STATION_NAME}}))},S=a(2),w=a(25),x=a.n(w),M=a(39),D=a.n(M),Y=a(41),k=a.n(Y),R=function(e){var t=e.className,a=e.loading,n=void 0===a||a;return r.a.createElement("div",{className:x()(k.a.loadingIndicator,t)},r.a.createElement(D.a,{loading:n}))},P=a(18),L=a.n(P),U=function(e){var t,a=e.children,n=e.disabled,i=e.kind,c=e.loading,o=void 0!==c&&c,s=e.title,u=Object(l.a)(e,["children","disabled","kind","loading","title"]);return r.a.createElement("button",Object.assign({className:x()(L.a.button,(t={},Object(S.a)(t,L.a[i],!!i),Object(S.a)(t,L.a.loading,o),t)),disabled:n||o,title:s},u),o&&r.a.createElement(R,{className:L.a.loadingIndicator}),r.a.createElement("span",{className:L.a.children},a||s))},C=a(26),F=a.n(C),B=function(){var e=Object(_.a)({mode:"onChange"}),t=e.formState,a=t.isSubmitted,i=t.isSubmitting,c=t.isValid,o=e.handleSubmit,s=e.register,l=Object(n.useState)([]),m=Object(E.a)(l,2),d=m[0],v=m[1],b=a&&!i&&0===d.length,O=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.stationName,e.next=3,j({stationName:a});case 3:n=e.sent,r=n.features,i=I(void 0===r?[]:r),v(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:F.a.search},r.a.createElement("form",{name:"searchForm",onSubmit:o(O)},r.a.createElement("input",{autoFocus:!0,name:"stationName",placeholder:"Search for weather stations...",ref:s({required:!0}),type:"text"}),r.a.createElement(U,{disabled:!c,kind:"primary",loading:i,title:"Search"})),d.length>0&&r.a.createElement("ul",{className:F.a.stations},d.map((function(e){var t=e.id,a=e.lastUpdated,n=e.province,i=e.stationName;return r.a.createElement("li",{key:t},r.a.createElement(u,{title:i,to:"/stations/".concat(t)},r.a.createElement("div",null,r.a.createElement("div",null,i),r.a.createElement("div",null,r.a.createElement("small",null,"Last updated: ",h()(a).format("YYYY-MM-DD")))),r.a.createElement("div",{className:F.a.meta},n)))}))),b&&r.a.createElement("p",null,"No stations found."))},J=function(e){return function(t){var a=t.stations.stations;return(void 0===a?{}:a)[e]}},V=function(e){return function(t){var a=t.stations.items;return(void 0===a?{}:a)[e]}},q=function(e){return e.ui.loading>0},H=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a({loading:e?1:-1,type:"SET_LOADING"}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(e){e.children;var t=e.headers,a=e.rows;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return"string"===typeof e?r.a.createElement("th",{key:e,title:e},e):e})))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e){return"object"===typeof e?e:r.a.createElement("td",null,e)})))}))))},Q=a(27),W=a.n(Q),z=["Date","Min Temp","Max Temp","Mean Temp","Precipitation"],K=function(){var e=Object(o.b)(),t=Object(m.f)().id,a=Object(o.c)(J(t))||{},i=a.elevation,c=a.firstUpdated,s=a.lastUpdated,l=a.province,u=a.stationName,d=Object(o.c)(V(t))||[],v=d.map((function(e){var t=e.date,a=e.maxTemperature,n=e.meanTemperature,r=e.minTemperature,i=e.totalPrecipitation;return[h()(t).format("YYYY-MM-DD"),"".concat(r,"C"),"".concat(a,"C"),"".concat(n,"C"),i>0?"".concat(i,"mm"):0]})),_=Object(o.c)(q);return Object(n.useEffect)((function(){t&&(e(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n){var r,i,c,o,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!J(e)(n())){t.next=2;break}return t.abrupt("return");case 2:return a(H(!0)),t.next=5,N(e);case 5:r=t.sent,(i=r.features).length,c=I(i),o=Object(E.a)(c,1),s=o[0],a({type:"STATIONS_UPDATE",stations:Object(S.a)({},e,s)}),a(H(!1));case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(t)),e(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n){var r,i,c,o,s,l,u,m,d,f,v;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!V(e)(n())){t.next=2;break}return t.abrupt("return");case 2:return a(H(!0)),t.next=5,N(e);case 5:return r=t.sent,(i=r.features).length,c=I(i),o=Object(E.a)(c,1),s=o[0],a({type:"STATIONS_UPDATE",stations:Object(S.a)({},e,s)}),30,l=h()(),u=l.format("M"),m=l.format("YYYY"),t.next=17,A({id:e,limit:30,month:u,year:m});case 17:d=t.sent,f=d.features,p=f,v=Object(O.sortBy)(p.map((function(e){var t=e.properties;return{date:t.LOCAL_DATE,maxTemperature:t.MAX_TEMPERATURE,meanTemperature:t.MEAN_TEMPERATURE,minTemperature:t.MIN_TEMPERATURE,totalPrecipitation:t.TOTAL_PRECIPITATION}})),"date"),a({type:"STATION_ITEMS_UPDATE",items:Object(S.a)({},e,v)}),a(H(!1));case 22:case"end":return t.stop()}var p}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(t)))}),[e,t]),r.a.createElement("div",{className:W.a.stationPage},_?r.a.createElement(R,{className:W.a.loadingIndicator}):r.a.createElement("div",null,r.a.createElement("div",{className:W.a.station},r.a.createElement("h2",null,u),r.a.createElement("div",null,l),r.a.createElement("div",null,"Station elevation: ",i,"m"),r.a.createElement("div",null,"First updated: ",h()(c).format("YYYY-MM-DD")),r.a.createElement("div",null,"Last updated: ",h()(s).format("YYYY-MM-DD"))),d.length>0&&r.a.createElement(G,{headers:z,rows:v})))},X=function(){return r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/stations/search",children:r.a.createElement(B,null)}),r.a.createElement(m.a,{path:"/stations/:id",children:r.a.createElement(K,null)}))},$=a(19),Z=a.n($),ee=function(){return r.a.createElement("div",{className:Z.a.app},r.a.createElement("div",{className:Z.a.header},r.a.createElement(u,{className:Z.a.logo,to:"/"},r.a.createElement("h1",null,"Pine Time")),r.a.createElement(u,{className:Z.a.searchButton,title:"Search for a weather station",to:"/stations/search"})),r.a.createElement("div",{className:Z.a.content},r.a.createElement(X,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(42),ae=(a(62),Object(te.a)());c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:ae},r.a.createElement(s.a,null,r.a.createElement(ee,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.f88834f9.chunk.js.map